import{r as l,j as s,P as h,b as c,B as i}from"./index-BgI2jtaI.js";import{a as p}from"./index-B9ygI19o.js";const f=({token:t})=>{const[m,x]=l.useState([]),n=async()=>{if(!t)return null;try{const e=await p.post(c+"/api/order/list",{},{headers:{token:t}});e.data.success?x(e.data.orders.reverse()):i.error(e.data.message)}catch(e){i.error(e.message)}},o=async(e,r)=>{try{(await p.post(c+"/api/order/status",{orderId:r,status:e.target.value},{headers:{token:t}})).data.success&&await n()}catch(a){console.log(a),i.error(response.data.message)}};return l.useEffect(()=>{n()},[t]),s.jsxs("div",{children:[s.jsx("h3",{children:"Order Page"}),s.jsx("div",{children:m.map((e,r)=>s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-[0.5fr_2fr_1fr] lg:grid-cols-[0.5fr_2fr_1fr_1fr_1fr] gap-3 items-start border-2 border-gray-200 p-5 md:p-8 my-3 md:my-4 text-xs sm:text-sm text-gray-700",children:[s.jsx(h,{className:"w-10 h-10 text-gray-400"}),s.jsxs("div",{children:[s.jsx("div",{children:e.items.map((a,d)=>d===e.items.length-1?s.jsxs("p",{className:"py-0.5",children:[" ",a.name," x ",a.quantity," ",s.jsxs("span",{children:[" ",a.size," "]})," "]},d):s.jsxs("p",{className:"py-0.5",children:[" ",a.name," x ",a.quantity," ",s.jsxs("span",{children:[" ",a.size," "]})," , "]},d))}),s.jsx("p",{className:"mt-3 mb-2 font-medium",children:e.address.firstName+" "+e.address.lastName}),s.jsxs("div",{children:[s.jsx("p",{children:e.address.street+","}),s.jsx("p",{children:e.address.city+", "+e.address.state+", "+e.address.country+", "+e.address.zipcode})]}),s.jsx("p",{children:e.address.phone})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm sm:text-[15px]",children:["Items : ",e.items.length]}),s.jsxs("p",{className:"mt-3",children:["Method : ",e.paymentMethod]}),s.jsxs("p",{children:["Payment : ",e.payment?"Done":"Pending"]}),s.jsxs("p",{children:["Date : ",new Date(e.date).toLocaleDateString()]})]}),s.jsxs("p",{className:"text-sm sm:text-[15px]",children:["$",e.amount]}),s.jsxs("select",{onChange:a=>o(a,e._id),value:e.status,className:"p-2 font-semibold",children:[s.jsx("option",{value:"Order Placed",children:"Order Placed"}),s.jsx("option",{value:"Packing",children:"Packing"}),s.jsx("option",{value:"Shipped",children:"Shipped"}),s.jsx("option",{value:"Out for delivery",children:"Out for delivery"}),s.jsx("option",{value:"Delivered",children:"Delivered"})]})]},r))})]})};export{f as default};
